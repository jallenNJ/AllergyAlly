//Including env with api key
require('dotenv').config();

//Setting up export
var exports = module.exports = {};

// Imports the Google Cloud client library
const vision = require('@google-cloud/vision');

exports.processImage = async function(PathToFile) {
    // Imports the Google Cloud client library
    const vision = require('@google-cloud/vision');
  
    // Creates a client
    const client = new vision.ImageAnnotatorClient();

    // Read a local image as a text document
    const [result] = await client.documentTextDetection(PathToFile);
    const fullTextAnnotation = result.fullTextAnnotation;
    //console.log(`Full text: ${fullTextAnnotation.text}`);
    
    return fullTextAnnotation.text;
}
